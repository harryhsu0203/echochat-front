# 安全部署指南

## 重要提醒 ⚠️

**在部署前請務必備份用戶資料！**

## 部署前準備

### 1. 備份當前資料
```bash
npm run backup
```

這會將所有用戶帳號、密碼、聊天記錄等資料備份到 `backups/` 目錄。

### 2. 檢查備份內容
備份完成後會顯示：
- 當前用戶數量
- 用戶列表（帳號和角色）

## 部署步驟

### 1. 提交代碼
```bash
git add .
git commit -m "更新內容"
git push origin main
```

### 2. 監控部署
- 登入 Render 儀表板
- 查看部署日誌
- 確認部署成功

### 3. 部署後檢查
- 確認網站正常運行
- 測試登入功能
- 檢查用戶資料是否完整

## 資料保護機制

### 持久化儲存
- 資料庫檔案儲存在 `./data/` 目錄
- Render 配置了持久化磁碟
- 資料不會在部署時丟失

### 備份策略
- 每次部署前自動備份
- 備份檔案包含時間戳
- 可手動恢復資料

## 緊急恢復

如果部署後發現資料丟失：

### 1. 停止服務
在 Render 儀表板中停止服務

### 2. 恢復資料
```bash
npm run restore
```

### 3. 重新部署
重新啟動服務

## 注意事項

1. **永遠不要直接修改生產環境的資料**
2. **部署前務必備份**
3. **定期檢查備份檔案**
4. **測試恢復流程**

## 當前用戶資料

根據最新備份，系統包含以下用戶：
- sunnyharry1 (admin) - 系統管理員
- testuser (user) - 測試用戶
- emailtest (user) - 郵件測試用戶

## 聯絡支援

如有問題，請聯絡技術支援團隊。 